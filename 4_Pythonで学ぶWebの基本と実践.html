<h1
id="pythonで学ぶwebの基本と実践"><strong>Pythonで学ぶWebの基本と実践</strong></h1>
<h2 id="webとは"><strong>Webとは</strong></h2>
<h3 id="webの概要"><strong>Webの概要</strong></h3>
<p>Web（World Wide
Web）は、インターネット上で情報を閲覧・共有する仕組みです。
Webサイトにアクセスすることで、ニュースを読んだり、動画を見たり、オンラインショッピングをしたりできます。</p>
<h3 id="webの仕組み"><strong>Webの仕組み</strong></h3>
<ul>
<li>クライアント(ブラウザ) Google
ChromeやSafariなどのブラウザを使ってWebサイトを表示します。</li>
<li>Webサーバー
Webサイトのデータを保存し、ブラウザからのリクエストに応じてページを送ります。</li>
</ul>
<h2 id="httpリクエストを送る"><strong>HTTPリクエストを送る</strong></h2>
<p>requestsモジュールを使用してサーバーにHTTPリクエストを送ってみる</p>
<ol type="1">
<li><p>requestsをインストールする
<code>pip install requests</code></p></li>
<li><p>プログラムファイルを用意する
ターミナルで以下コマンドを実行し、メモ帳を開く
<code>pwsh     notepad http_requests.py</code>
以下内容を保存し、メモ帳を閉じる ```python import requests</p>
<p>def get_pokemon_data(pokemon_name): url =
f”https://pokeapi.co/api/v2/pokemon/{pokemon_name.lower()}” response =
requests.get(url)</p>
<pre><code> # HTTPリクエストが成功時は200
 if response.status_code == 200:
     data = response.json()
     print(f&quot;ポケモン名: {data[&#39;name&#39;].capitalize()}&quot;)
     print(f&quot;ID: {data[&#39;id&#39;]}&quot;)
     print(&quot;タイプ:&quot;, &quot;, &quot;.join([t[&#39;type&#39;][&#39;name&#39;] for t in data[&#39;types&#39;]]))
     print(&quot;高さ:&quot;, data[&#39;height&#39;])
     print(&quot;重さ:&quot;, data[&#39;weight&#39;])
     print(&quot;能力値:&quot;, &quot;, &quot;.join([a[&#39;ability&#39;][&#39;name&#39;] for a in data[&#39;abilities&#39;]]))
 else:
     print(&quot;ポケモンが見つかりませんでした。&quot;)</code></pre>
<p>print(“——————-”) # ピカチュウのデータを取得
get_pokemon_data(“pikachu”) print(“——————-”) # ゲンガーのデータを取得
get_pokemon_data(“gengar”) print(“——————-”) ```</p></li>
<li><p>プログラムを実行する
<code>python http_requests.py</code></p></li>
</ol>
<h2
id="簡単なhttpサーバーをたてる"><strong>簡単なHTTPサーバーをたてる</strong></h2>
<p>HTTPサーバーとは簡単に言えば、ブラウザでアクセスできるサーバーのこと</p>
<ol type="1">
<li><p>プログラムファイルを用意する
ターミナルで以下コマンドを実行し、メモ帳を開く
<code>pwsh     notepad http_server.py</code>
以下内容を保存し、メモ帳を閉じる ```python import http.server import
socketserver</p>
<p>PORT = 8000 counter = 0 # アクセスカウンター</p>
<p>class CustomHandler(http.server.SimpleHTTPRequestHandler): def
do_GET(self): global counter counter += 1</p>
<pre><code>     # シンプルなHTMLページを生成
     html_content = f&quot;&quot;&quot;
     &lt;!DOCTYPE html&gt;
     &lt;html lang=&quot;ja&quot;&gt;
     &lt;head&gt;
         &lt;meta charset=&quot;UTF-8&quot;&gt;
         &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
         &lt;title&gt;Python Web Server&lt;/title&gt;
         &lt;style&gt;
             body {{
                 font-family: Arial, sans-serif;
                 text-align: center;
                 padding: 50px;
                 background-color: #f4f4f4;
             }}
             .container {{
                 background: white;
                 padding: 20px;
                 border-radius: 10px;
                 box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
                 display: inline-block;
             }}
             h1 {{ color: #333; }}
             p {{ font-size: 1.2em; }}
         &lt;/style&gt;
     &lt;/head&gt;
     &lt;body&gt;
         &lt;div class=&quot;container&quot;&gt;
             &lt;h1&gt;Python http.server で作るWebサイト&lt;/h1&gt;
             &lt;p&gt;このページへのアクセス数: &lt;strong&gt;{counter}&lt;/strong&gt;&lt;/p&gt;
             &lt;p&gt;Pythonの http.server を使って簡単なWebサーバーを構築しました。&lt;/p&gt;
             &lt;p&gt;&lt;a href=&quot;/&quot;&gt;更新する&lt;/a&gt;&lt;/p&gt;
         &lt;/div&gt;
     &lt;/body&gt;
     &lt;/html&gt;
     &quot;&quot;&quot;

     # HTTPレスポンスを送信
     self.send_response(200)
     self.send_header(&quot;Content-type&quot;, &quot;text/html; charset=utf-8&quot;)
     self.end_headers()
     self.wfile.write(html_content.encode(&quot;utf-8&quot;))</code></pre>
<p># サーバーの起動 with socketserver.TCPServer((““, PORT),
CustomHandler) as httpd: print(f”Serving at http://localhost:{PORT}“)
httpd.serve_forever()</p>
<p>```</p></li>
<li><p>プログラムを実行する <code>python http_server.py</code></p></li>
<li><p>ブラウザで動作確認する http://localhost:8000 <img
src="./image/http_server.png" /></p></li>
<li><p>ターミナルに戻りPythonを止める <code>Ctrl + c</code>
を押下して止める</p></li>
</ol>
<h2
id="pythonでwebスクレイピング"><strong>PythonでWebスクレイピング</strong></h2>
<p>WebスクレイピングとはWebサイトの情報を取得し、解析する技術
Amazonの商品の価格自動取得などで利用される技術</p>
<ol type="1">
<li><p>Beautifulsoup4をインストールする
<code>pip install beautifulsoup4</code></p></li>
<li><p>プログラムファイルを用意する
ターミナルで以下コマンドを実行し、メモ帳を開く
<code>pwsh     notepad web_scraping.py</code>
以下内容を保存し、メモ帳を閉じる</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_weather():</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 取得する都市のYahoo!天気URL（例: 東京）</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    url <span class="op">=</span> <span class="st">&quot;https://weather.yahoo.co.jp/weather/jp/13/4410.html&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># HTTPリクエストを送信（User-Agentを指定してボット対策を回避）</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    headers <span class="op">=</span> {<span class="st">&quot;User-Agent&quot;</span>: <span class="st">&quot;Mozilla/5.0&quot;</span>}</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># HTMLをパース</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&quot;html.parser&quot;</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 今日の天気情報を取得</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        weather <span class="op">=</span> soup.find(<span class="st">&quot;p&quot;</span>, class_<span class="op">=</span><span class="st">&quot;pict&quot;</span>).text.strip()</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        temperature_high <span class="op">=</span> soup.find(<span class="st">&quot;li&quot;</span>, class_<span class="op">=</span><span class="st">&quot;high&quot;</span>).text.strip()</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        temperature_low <span class="op">=</span> soup.find(<span class="st">&quot;li&quot;</span>, class_<span class="op">=</span><span class="st">&quot;low&quot;</span>).text.strip()</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;📍 東京の天気情報&quot;</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;☀️ 天気: </span><span class="sc">{</span>weather<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;🌡 最高気温: </span><span class="sc">{</span>temperature_high<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;❄️ 最低気温: </span><span class="sc">{</span>temperature_low<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&quot;天気情報を取得できませんでした&quot;</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    get_weather()</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span><span class="op">==</span><span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    main()</span></code></pre></div></li>
<li><p>プログラムを実行する <code>python web_scraping.py</code></p></li>
</ol>
